pipeline {
  agent any
  tools {
    maven 'maven_3_5_2'
  }

  stages {
    stage ('Run SAST Scan') {
      steps {
        sh 'mvn clean verify sonar:sonar -Dsonar.projectkey=demo-sast-learning -Dsonar.organization=demo -Dsonar.host.url=https://sonarloud.io -Dsonar.token=ee4b7cfd61e3bb672b13e05bd1cc753be799725c'
      }
    }
   stage ('Run SCA Scan') {
      steps {
        withCredentials([string(credentialsId: 'SNYK_TOKEN', variable: 'SNYK_TOKEN')]) {
           sh 'mvn snyk:test -fn'
 }
}
}
  }
}
